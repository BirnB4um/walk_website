<!DOCTYPE html>
<html lang="en">
<head>
    {% block meta %}
        <meta name="description" content="">
        <meta name="author" content="">
    {% endblock %}

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Custom CSS block -->
    {% block css %}
        <link rel="stylesheet" href="{{ url_for('static', filename='public/css/common.css') }}">
        <style>
            .navbar {
                background-color: #007bff; /* Bootstrap primary blue */
                height: 50px; /* Fixed height for navbar */
            }
            .navbar-light .navbar-nav .nav-link {
                color: white; /* White text for nav links */
            }
            .navbar-light .navbar-nav .nav-link:hover {
                color: #f8f9fa; /* Slightly lighter blue on hover */
            }

            /* Sidebar styles */
            #sidebar {
                position: fixed;
                top: 0;
                left: -250px; /* Hide sidebar off-screen */
                height: 100%;
                width: 220px;
                background-color: #343a40; /* Dark gray background for sidebar */
                color: white; /* White text in sidebar */
                transition: left 0.3s ease; /* Smooth transition for sliding */
                z-index: 1000; /* Ensure it's above other content */
                padding-top: 60px; /* Offset for navbar */
            }
            #sidebar.active {
                left: 0; /* Slide in sidebar */
            }

            /* Overlay styles */
            #overlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5); /* Dark semi-transparent overlay */
                z-index: 900; /* Just behind the sidebar */
                display: none; /* Initially hidden */
            }
            #overlay.active {
                display: block; /* Show when active */
            }

            /* Sidebar toggle button */
            .sidebar-toggle {
                cursor: pointer;
                color: white; /* Color for the toggle button */
                font-size: 24px; /* Adjust size for better visibility */
                margin-right: 15px; /* Space between button and brand */
            }

            /* Main content padding */
            #main-content {
                min-height: calc(100vh - 50px);  /* Ensure main content takes at least full height of the viewport */
            }
        </style>
    {% endblock %}

    <title>{% block title %}WalkMap{% endblock %}</title>
</head>

<body>

    <!-- Sidebar -->
    <div id="sidebar">
        <h2 class="text-white p-2">Sidebar</h2>
        <ul class="list-unstyled p-3">
            <li><a href="/overview" class="nav-link text-white">Overview</a></li>
            <li><a href="/map" class="nav-link text-white">Map</a></li>
            <li><a href="/walks" class="nav-link text-white">Walks</a></li>
            <li><a href="/visualizations" class="nav-link text-white">Visualizations</a></li>
        </ul>
    </div>

    <!-- Overlay for sidebar -->
    <div id="overlay"></div>

    <!-- Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-light">
        <div class="container-fluid">
            <span class="sidebar-toggle" aria-controls="sidebar" aria-expanded="false" aria-label="Toggle sidebar">
                &#9776; <!-- Hamburger icon -->
            </span>
            <a class="navbar-brand" href="/overview" style="color: white;">WalkMap</a>
        </div>
    </nav>

    <!-- Main Content -->
    <div class="container-fluid p-0 d-flex flex-column" id="main-content">
        {% block body %}
        {% endblock %}
    </div>

    <!-- Custom JS block -->
    {% block scripts %}
        <script src="{{ url_for('static', filename='public/js/common.js') }}"></script>
        <script>
            const toggleButton = document.querySelector('.sidebar-toggle');
            const sidebar = document.getElementById('sidebar');
            const overlay = document.getElementById('overlay');

            // Function to open the sidebar and show overlay
            function openSidebar() {
                sidebar.classList.add('active');
                overlay.classList.add('active');
            }

            // Function to close the sidebar and hide overlay
            function closeSidebar() {
                sidebar.classList.remove('active');
                overlay.classList.remove('active');
            }

            // Toggle sidebar when clicking the toggle button
            toggleButton.addEventListener('click', function() {
                if (sidebar.classList.contains('active')) {
                    closeSidebar();
                } else {
                    openSidebar();
                }
            });

            // Close sidebar when clicking on the overlay
            overlay.addEventListener('click', closeSidebar);
        </script>
    {% endblock %}

</body>
</html>
